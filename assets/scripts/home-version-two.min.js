$(function(){function i(i){var n=m;return i<m.minScreenWidth&&(n=g),i<n.minScreenWidth&&(n=o),n}function n(i,n){var d={minPicSize:i.minPicSize,maxPicSize:i.maxPicSize,minScreenWidth:i.minScreenWidth,maxScreenWidth:i.maxScreenWidth,minPaddingX:i.minPaddingX,maxPaddingX:i.maxPaddingX,minPaddingY:i.minPaddingY,maxPaddingY:i.maxPaddingY,iterations:i.iterations},a=i.maxScreenWidth;return i.maxScreenWidth<0&&(a=screen.width),d.minPicSize=i.minPicSize*n/a,d.maxPicSize=i.maxPicSize*n/a,d.minPaddingX=i.minPaddingX*n/a,d.maxPaddingX=i.maxPaddingX*n/a,d.minPaddingY=i.minPaddingY*n/a,d.maxPaddingY=i.maxPaddingY*n/a,d}function d(d){function e(i,n,d,a,e,r){var h=d.length-a,P=Math.floor(Math.random()*h),c=d[P],w=m(c);if(w.height<=0)return d[P].Area=w,g(d,P,h-1),!0;var x=o-w.width-r.maxPaddingX,u=i.y-r.minPaddingY;if(0>=u)return!1;var f=Math.round(r.minPaddingX+x*Math.random()),y=r.minPaddingY+Math.floor(Math.random()*u),s=new t(f,y,w.width,w.height);return s.check_overlap(e,r.minPaddingX,r.minPaddingY)?!1:(e.push(s),d[P].Area=s,g(d,P,h-1),$(c).css({left:f,top:y,width:w.width}),i.y>y+w.height+r.minPaddingY?!0:n.y<y+w.height+r.minPaddingY?(n.y=y+w.height+r.minPaddingY,i.x=n.x,i.y=n.y,!0):(i.y<y+w.height+r.minPaddingY&&(i.x=n.x,i.y=n.y),!0))}function r(i,n,d,a,e,r,h,P){var c=d.length-a,w=Math.floor(Math.random()*c),x=d[w],u=m(x);if(u.height<=0)return d[w].Area=u,void g(d,w,c-1);var f=o-(i.x+u.width)-r.maxPaddingX;0>f?(i.y=n.y,i.x=i.x>.75*o?0:o/4):i.y+=r.minPaddingY;var y=Math.round(i.x+h*Math.random()),s=Math.round(i.y+P*Math.random());i.x=y+u.width+r.minPaddingX,n.y<s+u.height+r.minPaddingY&&(n.y=s+u.height+r.minPaddingY),$(x).css({left:y,top:s,width:u.width});var v=new t(y,s,u.width,u.height);e.push(v),d[w].Area=v,g(d,w,c-1)}function m(i){var n=$(i).width(),d=$(i).height();if(0>=d)return new t(0,0,n,d);var a=c.minPicSize+u*Math.random();if(d>n&&!h){var e=a;a=a*n/d,d=e}else d=a*d/n;return new t(0,0,a,d)}function g(i,n,d){var a=i[n],t=i[d];i[n]=t,i[d]=a}var o=$(".container").width();console.log(o);var P=new Array,c=i($(window).width()),c=n(c,$(window).width()),w=c.maxPaddingX-c.minPaddingX,x=c.maxPaddingY-c.minPaddingY;console.log(w);for(var d=$(".work"),u=c.maxPicSize-c.minPicSize,f=new a(c.minPaddingX,c.minPaddingY),y=new a(c.minPaddingX,c.minPaddingY),s=0;s<d.length;s++)if(s>0){for(var v=0;v<c.iterations&&!e(f,y,d,s,P,c,w,x);)v++;v>=c.iterations&&r(f,y,d,s,P,c,w,x)}else r(f,y,d,s,P,c,w,x);return d}function a(i,n){this.x=i,this.y=n}function t(i,n,d,t){this.x=i,this.y=n,this.width=d,this.height=t;{var e=new a(i,n),r=new a(i+d,n),h=new a(i,n+t);new a(i+d,n+t)}this.get_overlap=function(i,n,d){for(var t=new Array,m=0;m<i.length;m++){{var g=i[m],o=new a(g.x,g.y),P=new a(g.x+g.width,g.y),c=new a(g.x,g.y+g.height);new a(g.x+g.width,g.y+g.height)}h.y<o.y-d||c.y<e.y-d||r.x<o.x-n||P.x<e.x-n||t.push(g)}return t},this.check_overlap=function(i,n,d){var a=this.get_overlap(i,n,d);return a.length>0?!0:!1},this.contains=function(i,n,d){for(var t=0;t<i.length;t++){{var m=i[t],g=new a(m.x,m.y),o=new a(m.x+m.width,m.y),P=new a(m.x,m.y+m.height);new a(m.x+m.width,m.y+m.height)}if(g.x-n<e.x&&r.x<o.x+n&&g.y-d<e.y&&P.y+d>h.y)return!0}return!1}}function e(i,n){function d(i,n){var d=n/P;return height=i*d}for(var a=0;a<n.length;a++){var t=n[a];$(t).css({top:d(t.Area.y,i),left:d(t.Area.x,i),width:d(t.Area.width,i)})}}function r(n,a,t){var r=i(n),h=i($(window).width());return r!=h?(console.log("switch"),t=d(t),P=a):e(a,t),t}var h=!0,m={minPicSize:240,maxPicSize:600,minScreenWidth:1024,maxScreenWidth:-1,minPaddingX:100,maxPaddingX:200,minPaddingY:200,maxPaddingY:400,iterations:100},g={minPicSize:200,maxPicSize:350,minScreenWidth:480,maxScreenWidth:1023,minPaddingX:20,maxPaddingX:200,minPaddingY:100,maxPaddingY:300,iterations:50},o={minPicSize:180,maxPicSize:300,minScreenWidth:0,maxScreenWidth:479,minPaddingX:20,maxPaddingX:160,minPaddingY:20,maxPaddingY:70,iterations:10},P=$(".container").width(),c=$(window).width(),w=$(".work");$(window).on("load",function(){w=d(w)}),$(window).on("resize",function(){var i=$(".container").width();w=r(c,i,w),c=$(window).width()})});