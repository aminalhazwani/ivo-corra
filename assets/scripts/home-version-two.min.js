$(function(){function i(i){var n=h;return i<h.minScreenWidth&&(n=m),i<n.minScreenWidth&&(n=o),n}function n(i,n){var d={minPicSize:i.minPicSize,maxPicSize:i.maxPicSize,minScreenWidth:i.minScreenWidth,maxScreenWidth:i.maxScreenWidth,minPaddingX:i.minPaddingX,maxPaddingX:i.maxPaddingX,minPaddingY:i.minPaddingY,maxPaddingY:i.maxPaddingY,iterations:i.iterations},a=i.maxScreenWidth;return i.maxScreenWidth<0&&(a=screen.width),d.minPicSize=i.minPicSize*n/a,d.maxPicSize=i.maxPicSize*n/a,d.minPaddingX=i.minPaddingX*n/a,d.maxPaddingX=i.maxPaddingX*n/a,d.minPaddingY=i.minPaddingY*n/a,d.maxPaddingY=i.maxPaddingY*n/a,d}function d(d){function t(i,n,d,a,t,r){var g=d.length-a,P=Math.floor(Math.random()*g),c=d[P],w=h(c);if(w.height<=0)return d[P].Area=w,m(d,P,g-1),!0;var x=o-w.width-r.maxPaddingX,s=i.y-r.minPaddingY;if(0>=s)return!1;var u=Math.round(r.minPaddingX+x*Math.random()),f=r.minPaddingY+Math.floor(Math.random()*s),y=new e(u,f,w.width,w.height);return y.check_overlap(t,r.minPaddingX,r.minPaddingY)?!1:(t.push(y),d[P].Area=y,m(d,P,g-1),$(c).css({left:u,top:f,width:w.width}),i.y>f+w.height+r.minPaddingY?!0:n.y<f+w.height+r.minPaddingY?(n.y=f+w.height+r.minPaddingY,i.x=n.x,i.y=n.y,!0):(i.y<f+w.height+r.minPaddingY&&(i.x=n.x,i.y=n.y),!0))}function r(i,n,d,a,t,r,g,P){var c=d.length-a,w=Math.floor(Math.random()*c),x=d[w],s=h(x);if(s.height<=0)return d[w].Area=s,void m(d,w,c-1);var u=o-(i.x+s.width)-r.maxPaddingX;0>u?(console.log("size"),i.y=n.y,i.x>.75*o?i.x=0:(console.log("else"),i.x=o/4)):i.y+=r.minPaddingY;var f=Math.round(i.x+g*Math.random()),y=Math.round(i.y+P*Math.random());i.x=f+s.width+r.minPaddingX,n.y<y+s.height+r.minPaddingY&&(n.y=y+s.height+r.minPaddingY),$(x).css({left:f,top:y,width:s.width});var v=new e(f,y,s.width,s.height);t.push(v),d[w].Area=v,m(d,w,c-1)}function h(i){var n=$(i).width(),d=$(i).height();if(0>=d)return new e(0,0,n,d);var a=P.minPicSize+x*Math.random();if(d>n){var t=a;a=a*n/d,d=t}else d=a*d/n;return new e(0,0,a,d)}function m(i,n,d){var a=i[n],e=i[d];i[n]=e,i[d]=a}var o=$(".container").width();console.log(o);var g=new Array,P=i($(window).width()),P=n(P,$(window).width()),c=P.maxPaddingX-P.minPaddingX,w=P.maxPaddingY-P.minPaddingY;console.log(c);for(var d=$(".work"),x=P.maxPicSize-P.minPicSize,s=new a(P.minPaddingX,P.minPaddingY),u=new a(P.minPaddingX,P.minPaddingY),f=0;f<d.length;f++)if(f>0){for(var y=0;y<P.iterations&&!t(s,u,d,f,g,P,c,w);)y++;y>=P.iterations&&r(s,u,d,f,g,P,c,w)}else r(s,u,d,f,g,P,c,w);return d}function a(i,n){this.x=i,this.y=n}function e(i,n,d,e){this.x=i,this.y=n,this.width=d,this.height=e;{var t=new a(i,n),r=new a(i+d,n),h=new a(i,n+e);new a(i+d,n+e)}this.get_overlap=function(i,n,d){for(var e=new Array,m=0;m<i.length;m++){{var o=i[m],g=new a(o.x,o.y),P=new a(o.x+o.width,o.y),c=new a(o.x,o.y+o.height);new a(o.x+o.width,o.y+o.height)}h.y<g.y-d||c.y<t.y-d||r.x<g.x-n||P.x<t.x-n||e.push(o)}return e},this.check_overlap=function(i,n,d){var a=this.get_overlap(i,n,d);return a.length>0?!0:!1},this.contains=function(i,n,d){for(var e=0;e<i.length;e++){{var m=i[e],o=new a(m.x,m.y),g=new a(m.x+m.width,m.y),P=new a(m.x,m.y+m.height);new a(m.x+m.width,m.y+m.height)}if(o.x-n<t.x&&r.x<g.x+n&&o.y-d<t.y&&P.y+d>h.y)return!0}return!1}}function t(i,n){function d(i,n){var d=n/g;return height=i*d}for(var a=0;a<n.length;a++){var e=n[a];$(e).css({top:d(e.Area.y,i),left:d(e.Area.x,i),width:d(e.Area.width,i)})}}function r(n,a,e){var r=i(n),h=i($(window).width());return r!=h?(console.log("switch"),e=d(e),g=a):t(a,e),e}var h={minPicSize:300,maxPicSize:600,minScreenWidth:1024,maxScreenWidth:-1,minPaddingX:100,maxPaddingX:200,minPaddingY:200,maxPaddingY:400,iterations:100},m={minPicSize:200,maxPicSize:350,minScreenWidth:480,maxScreenWidth:1023,minPaddingX:80,maxPaddingX:120,minPaddingY:100,maxPaddingY:300,iterations:50},o={minPicSize:260,maxPicSize:300,minScreenWidth:0,maxScreenWidth:479,minPaddingX:20,maxPaddingX:40,minPaddingY:20,maxPaddingY:70,iterations:10},g=$(".container").width(),P=$(window).width(),c=$(".work");$(window).on("load",function(){c=d(c)}),$(window).on("resize",function(){var i=$(".container").width();c=r(P,i,c),P=$(window).width()})});